
Eclipse使用技巧
=======================================


设置编译前自动保存
===================


在编译前，最好先设置【Save automatically before build】，这样就不用先手动保存后再编译。设置过程如下：“Window”->“Preferences”->“General”->“Workspace”->选择“Save automatically before build”，如 :numref:`a_picture_automatically_save` 所示。

.. _a_picture_automatically_save:

.. figure:: ../images/4/设置编译前自动保存.png
   :align: center

   设置编译前自动保存
   
文件链接或修改结构目录
======================= 
如果用户需要在工程外部新建文件夹归纳自己的工程文件，如 :numref:`add` 所示。

.. _add:

.. figure:: ../images/4/添加文件夹.png
   :align: center

   添加文件夹   
   
但是该文件夹不在工程目录(projects)下，因此在添加工程时不能直接被包含进去，需要额外添加，可使用File->Import->File System进行操作，也可如 :numref:`addimport` 所示进行添加。

.. _addimport:

.. figure:: ../images/4/添加选项.png
   :align: center

   添加选项      
   
然后选择File System，如 :numref:`addsys` 所示进入文件添加界面。

.. _addsys:

.. figure:: ../images/4/添加文件.png
   :align: center

   添加文件         
    
点击Next,选择文件，如 :numref:`addfile` 所示进行文件选择。

.. _addfile:

.. figure:: ../images/4/选择文件.png
   :align: center

   选择文件      

其中【1】为选择的文件夹所在目录，【2】为需要添加的文件夹，添加完成后如 :numref:`addfileover` 所示进行文件选择。

.. _addfileover:

.. figure:: ../images/4/添加完成.png
   :align: center

   添加完成  
   

头文件路径添加
=================
如果编译完成后出现如 :numref:`builderror` 所示结果，其原因是添加的工程路径没有添加，需要将文件路径添加到工程工程中。

.. _builderror:

.. figure:: ../images/4/编译结果.png
   :align: center

   编译结果
   
查看或添加头文件路径，先选中对应的项目，依次点击界面菜单“Project”->“Properties”->“C/C++ Build”->“Settings”->“Tool Settings”->“Cross ARM  C Compiler”->“Includes”以及“Cross ARM C++ Compiler”->“Includes”，如 :numref:`a_picture_include` 所示。

.. _a_picture_include:

.. figure:: ../images/4/头文件路径.png
   :align: center

   头文件路径


然后点击【添加】图标，添加路径如 :numref:`a_picture_workspace` 所示。

.. _a_picture_workspace:

.. figure:: ../images/4/使用工作空间添加头文件.png
   :align: center

   使用工作空间添加头文件

.. attention::
  C文件只会使用C头文件路径，cpp文件只会使用C++头文件路径，因而需要注意两个路径要区分填写。

然后，选择【Workspace】，在弹出来的窗口中选择头文件所在的文件夹后，再点击【OK】选项即可完成头文件路径添加，如 :numref:`a_picture_watting_include` 所示，或者直接填入头文件的绝对或相对路径。

.. _a_picture_watting_include:

.. figure:: ../images/4/选择待添加路径.png
   :align: center

   选择待添加路径

寻址路径，如"${AW_ROOT}/include/config"则是在IDE中进行了文件路径定义，
如 :numref:`def` 所示进行操作。

.. _def:

.. figure:: ../images/4/宏定义路径.png
   :align: center

   宏定义路径

该处定义了SDK包下的文件目录，因此在使用中SDK目录名称不同需自行修改。   
   

链接脚本文件的查看与更改
=========================

用户想查看当前工程使用的链接脚本文件或改用新的链接脚本，可以进行以下操作过程即可实现：“Project”->“Properties”->“C/C++ Build”->“Settings”->“Tool Settings”->“Cross ARM  C++ Linker”->“General”。最终结果 :numref:`a_picture_look_link` 所示。

.. _a_picture_look_link:

.. figure:: ../images/4/查看或更改链接脚本文件.png
   :align: center

   查看或更改链接脚本文件


链接库文件添加
===================

用户若想添加库文件，可以进行以下操作过程即可实现： “Project”->“Properties”->“C/C++ Build”->“Settings”->“Tool Settings”->“Cross ARM  C++ Linker”->“Libraries”。最终结果如 :numref:`a_picture_link_kufile` 所示。

.. _a_picture_link_kufile:

.. figure:: ../images/4/添加链接库文件.png
   :align: center

   添加链接库文件

这里如果库名字为libtest_lib.a，那么应该填写test_lib。

.. attention::
  添加库文件时，也要把相应的库文件路径添加进来，添加的方法与头文件路径添加的方法类似。


代码编译优化等级调整
=====================

如果编译生成的目标文件太大，可对当前代码的编译优化等级进行调整。操作过程如下所示：“Project”->“Properties”->“C/C++ Build”->“Settings”->“Tool Settings”->“Optimization” ->下拉菜单中选择合适的代码编译优化等级，如 :numref:`a_picture_youhua` 所示。

.. _a_picture_youhua:

.. figure:: ../images/4/代码编译优化等级.png
   :align: center

   代码编译优化等级

.. attention::
  代码的编译优化一般在Release版本中使用，一般来说-O3编译优化等级最高。代码的编译优化等级调得越高，稳定性就会降低，容易出现问题，建议不要开得过高。在代码Debug时应采用默认设置，不要调整代码的编译优化等级，以防不能顺利调试。


使用并行编译方式进行代码编译
=============================

如果想加快代码的编译速度，可以进行如下操作：依次点击 “Project”->“Properties”->“C/C++ Build” ->“Behavior”， 在显示的界面中选择【Enable parallel build】这个选项，如 :numref:`a_picture_youhua_debug` 所示。

.. _a_picture_youhua_debug:

.. figure:: ../images/4/使用并行方式编译代码.png
   :align: center

   使用并行方式编译代码


置空格代替TAB
==============

设置空格代替TAB操作步骤如下所示：
1、依次点击“Window”->“Preferences”->“General”->“Editors”->“Text Editors”->选择“Insert spaces for tabs”，然后点击【OK】选项，如 :numref:`a_picture_Instert_spaces_for_tabs` 所示。

.. _a_picture_Instert_spaces_for_tabs:

.. figure:: ../images/4/勾选Instert_spaces_for_tabs.png
   :align: center

   勾选Instert spaces for tabs

2、依次点击“Window”->“Preferences”->“C/C++”->“Code Style”->“Formatter”，在显示的界面中点击【New】选项，新建一个C/C++代码样式，如 :numref:`a_picture_new_code` 所示。

.. _a_picture_new_code:

.. figure:: ../images/4/新建代码样式.png
   :align: center

   新建代码样式

3、在接下来弹出的界面中在【Profile name】输入代码样式的名字，例如“spaces instead of tab”，然后点击【OK】选项，如 :numref:`a_picture_new_code_name` 所示。

.. _a_picture_new_code_name:

.. figure:: ../images/4/代码样式名字.png
   :align: center

   代码样式名字

4、在新弹出的界面中，在【Tab policy】选项的下拉菜单中选【Spcaes only】这一项，然后点击【Apply】，再点击【OK】选项，如 :numref:`a_picture_new_code_tab` 所示。

.. _a_picture_new_code_tab:

.. figure:: ../images/4/Tab策略更改.png
   :align: center

   Tab策略更改

6、上一步设置完成后，会返回到如 :numref:`a_picture_new_code_ok` 所示的界面，点击【Apply】，再点击【OK】选项，使Tab策略更改生效。

.. _a_picture_new_code_ok:

.. figure:: ../images/4/完成设置.png
   :align: center

   完成设置


设置代码编辑框内C/C++字体大小
================================

依次点击“Window”->“Preferences”->“General”->“Appearance”->“Colorsa and Fonts”->“C/C++”->“Editor”,双击 :numref:`a_picture_new_code_tab` 中的1处即可更改。

.. _a_picture_cc_format:

.. figure:: ../images/4/更改CC++字体.png
   :align: center

   更改C/C++字体


打开未知类型文件出错的解决方法
===============================

当打开eclipse不能识别的文件时，若出现如 :numref:`a_picture_error1` 所示的错误，可以按照以下提供的方法解决。

.. _a_picture_error1:

.. figure:: ../images/4/打开未知类型文件出错提示.png
   :align: center

   打开未知类型文件出错提示

依次点击“Window”->“Preferences”->“General”->“Editors”->“File Associations”->下拉菜单中选择【System Editor;if none; Text Edotor】这一选项后即可解决该错误，如 :numref:`a_picture_error` 所示。

.. _a_picture_error:

.. figure:: ../images/4/打开未知类型文件出错解决方法.png
   :align: center

   打开未知类型文件出错解决方法

设置eclipse外观风格
===============================

eclipse提供了多种外观风格，用户可根据自己的喜好设置外观。本章将介绍护眼模式、Dark外观风格的设置方法。

护眼模式
--------
依次点击“Window”->“Preferences”->“General”->“Text Editors”，出现如 :numref:`a_picture_set_back_color` 所示界面，在“Text Editors”界面中选中【Background color】并点击【Color】选项，将出现颜色配置界面，用户按照 :numref:`a_picture_set_color` 设置即可。


.. _a_picture_set_back_color:

.. figure:: ../images/4/设置背景颜色.png
   :align: center

   设置背景颜色

.. _a_picture_set_color:

.. figure:: ../images/4/颜色设置.png
   :align: center

   颜色设置

设置完成后，保存配置，如 :numref:`a_picture_save_set` 所示。

.. _a_picture_save_set:

.. figure:: ../images/4/保存设置.png
   :align: center

   保存设置

护眼模式效果如 :numref:`a_picture_eye_result` 。


.. _a_picture_eye_result:

.. figure:: ../images/4/护眼模式效果.png
   :align: center

   护眼模式效果

Dark外观
----------

依次点击“Window”->“Preferences”->“General”->“Appearance”，出现如 :numref:`a_picture_dark_set` 所示界面，在“Appearance”界面中【Theme】下拉菜单中选择【Dark】这一选项后，保存设置即可。


.. _a_picture_dark_set:

.. figure:: ../images/4/eclipse外观风格.png
   :align: center

   eclipse外观风格

保存成功后，eclipse外观效果如 :numref:`a_picture_dark_end` 所示。


.. _a_picture_dark_end:

.. figure:: ../images/4/黑色外观.png
   :align: center

   黑色外观

常规操作
==========

添加文件：

如果添加.c、.h文件、文件夹，可选择File->New添加所需文件，也可选择项目，然后单击右键进行操作，如 :numref:`fILE` 所示进行操作。

.. _fILE:

.. figure:: ../images/4/添加工程文件.png
   :align: center

   添加工程文件
    
修改名字：    

如果需要修改文件或文件夹名字，选择相应的文件或文件夹，点击右键选择Rename;

屏蔽文件：

屏蔽该文件后不会参与编译，选择项目，然后单击右键，选择Resource  Configurations->Exclude from Build;
    
清除编译信息：

有时在编译过程中产生编译错误，可将其删除，选择项目，然后单击右键，选择Clean Project即可；
    
文件重构：  

一般在文件目录发生变化时，重构一次，选择项目，然后单击右键，选择Index->Rebulid；
    
修改字体大小等窗口布局： 

在使用中，不小心关闭了某个窗口或需要更改字体大小、背景颜色等，都可在Window下进行查找更改，如 :numref:`win` 所示进行操作。

.. _win:

.. figure:: ../images/4/窗口.png
   :align: center

   窗口  
   
常用快捷键
===========

任何IDE都有其自身常用的快捷键，熟练使用快捷键可以缩短大量的工作时间，这是比较重要的一个步骤，在Eclipse中有大量快捷方式、下面列举一些常用的快捷方式如下所示：
 
* Ctrl + 鼠标左键(类、方法、属性的变量名词)：定位跟踪某变量声明或定义的位置
* Ctrl + X                                 : 剪切            
* Ctrl + C                                 ：复制
* Ctrl + V                                 ：粘贴
* Ctrl + D                                 : 删除当前行
* Ctrl + F                                 : 查找/替换(当前编辑窗口)
* Ctrl + H                                 : 全局搜索 
* Ctrl + /                                 : 注释当前行或多行代码
* Ctrl + S                                 : 保存当前文件
* Ctrl + L                                 : 跳转某一行
* Alt  + /                                 : 代码智能提示
* Ctrl + Shift + S                         : 保存所有文件
* Ctrl + Shift + X                         : 把当前选中的文本全部变为大写
* Ctrl + Shift + Y                         : 把当前选中的文本全部变为小写
